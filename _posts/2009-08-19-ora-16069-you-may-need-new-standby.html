---
layout: post
title: ORA-16069? You May Need A New Standby Controlfile
date: '2009-08-19T12:20:00.000-05:00'
author: Don Seiler
tags: 
modified_time: '2010-11-20T11:37:14.012-06:00'
blogger_id: tag:blogger.com,1999:blog-7032512792942232766.post-6799498752612923602
blogger_orig_url: http://www.seiler.us/2009/08/ora-16069-you-may-need-new-standby.html
---

<em><span class="Apple-style-span" style="font-size: x-small;">Originally posted on <a href="http://www.pythian.com/news/1902/ora-16069-new-standby-controlfile">The Pythian Group blog</a>.</span></em><br /><br />On a recent Monday, I had to perform an emergency Oracle standby switchover for a client whose primary instance host had mysteriously rebooted itself over the previous day. Confidence in that host was, understandably, shaken.<br /><br />The Oracle Data Guard configuration is a 3-instance setup using Data Guard Broker: one primary, we’ll call it OraA, feeding two standby instances, OraB and OraC. In this particular configuration, we perform switchovers between OraA and OraC. Caught in the middle is OraB, which is on a 60-minute standby delay.<br /><br />After this particular switchover, OraB started complaining with this message in the alert log:<br /><br /><span id="more-1902"> </span><br /><pre>ORA-16069: Archive Log standby database activation identifier mismatch</pre><pre></pre>We had seen this occasionally in prior switchovers, and the problem would fix itself once the standby delay passed and the OraB standby would process the log notifying it of the switchover. This time, however, recovery was stopped and more than enough time had elapsed. OraA and OraC were performing perfectly fine.<br /><br />Much of the reference searching I saw suggested that the standby instance would have to be completely rebuilt. Not an appetizing option. A search of metalink turned up Bug 4048687, which seemed to demonstrate a similar problem, although on a different OS/Platform. That solution was to recreate the standby controlfile. Trust me, it sounds more drastic than it is!<br /><br />Here’s how to do it in just 6 easy steps!<br /><ol><li>Shutdown the misbehaving standby.</li><li>Copy one of the current standby controlfiles for safekeeping (just in case).</li><li>On the primary instance, create a new standby controlfile: <code>alter database create standby controlfile as '/tmp/stdby.ctl';</code></li><li>Transfer that new standby controlfile to the standby host.</li><li>Copy the new controlfile to the controlfile location(s) used by the instance (you have more than one, right?).</li><li>STARTUP MOUNT the standby instance. If you use the Data Guard Broker, it should automatically begin recovery for you; otherwise restart managed recovery with <code>alter database recover managed standby database disconnect;</code></li></ol>Voila.  Standby recovery should resume nicely, assuming logs are there to apply.