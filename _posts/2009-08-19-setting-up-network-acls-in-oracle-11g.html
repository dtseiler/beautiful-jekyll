---
layout: post
title: Setting up Network ACLs in Oracle 11g… For Dummies
date: '2009-08-19T12:37:00.000-05:00'
author: Don Seiler
tags: 
modified_time: '2010-11-20T11:27:16.167-06:00'
blogger_id: tag:blogger.com,1999:blog-7032512792942232766.post-1774002754212201284
blogger_orig_url: http://www.seiler.us/2009/08/setting-up-network-acls-in-oracle-11g.html
---

<em>Originally posted on <a href="http://www.pythian.com/news/3434/setting-up-network-acls-in-oracle-11g-for-dummies">The Pythian Group blog</a>.<br /></em><br /><br />Having recently performed a test upgrade for a client from Oracle RDBMS 10g to 11g, I can tell you that one of the big changes that will likely require action on your part as DBA is the new fine-grained access control for the packages <code>UTL_SMTP</code>, <code>UTL_TCP</code>, <code>UTL_MAIL</code>, <code>UTL_HTTP</code> and <code>UTL_INADDR</code>.  Part of the Oracle 11g pre-upgrade tool will <a href="http://download.oracle.com/docs/cd/B28359_01/server.111/b28300/upgrade.htm#BABJHIHH">notify you of users that will require new privileges</a>.<br /><br />Of course, Oracle’s <a href="http://download.oracle.com/docs/cd/B28359_01/server.111/b28300/afterup.htm#BABFCBJI">post-upgrade network ACL setup documentation</a> is much more confusing than it needs to be, at least for simple minds like me. A colleague stepped forward with a simple set of commands for a basic setup that even the tired and stressed can understand.<br /><br />I’ll share that here, with some basic explanation:<br /><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;">BEGIN</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;">-- Create the new ACL, naming it "netacl.xml", with a description.</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;">-- Also, provide one starter privilege, granting user FOO</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;">-- the privilege to connect.</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;">DBMS_NETWORK_ACL_ADMIN.CREATE_ACL('netacl.xml',</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;">'Allow usage to the UTL network packages', 'FOO', TRUE, 'connect');</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;"><br /></span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;">-- Now grant privilege to resolve DNS names for FOO,</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;">-- and then grant connect and resolve to user BAR</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;">DBMS_NETWORK_ACL_ADMIN.ADD_PRIVILEGE('netacl.xml' ,'FOO', TRUE, 'resolve');</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;">DBMS_NETWORK_ACL_ADMIN.ADD_PRIVILEGE('netacl.xml' ,'BAR', TRUE, 'connect');</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;">DBMS_NETWORK_ACL_ADMIN.ADD_PRIVILEGE('netacl.xml' ,'BAR', TRUE, 'resolve');</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;"><br /></span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;">-- Specify which hosts this ACL applies to,</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;">-- for simplicity, we're saying all (*)</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;">-- You might want to specify certain hosts to lock this down.</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;">DBMS_NETWORK_ACL_ADMIN.ASSIGN_ACL('netacl.xml','*');</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;">END;</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;">/</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;"><br /></span></span><br />As you can see, this example will let the <code>FOO</code> and <code>BAR</code> database users connect and resolve to any host.  The <code>ASSIGN_ACL</code> section in the full package documentation (see link below) details how this can be used to lock down a user’s ability to make outside connections.<br /><br />Of course, nothing beats reading the <a href="http://download.oracle.com/docs/cd/B28359_01/appdev.111/b28419/d_networkacl_adm.htm#insertedID0">Oracle 11g DBMS_NETWORK_ACL_ADMIN documentation</a>, where you can see some examples of stricter ACL setups.