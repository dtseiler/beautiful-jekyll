---
layout: post
title: 'PGA: Not just for Caddyshack 2 fans'
date: '2007-04-03T12:17:00.000-05:00'
author: Don Seiler
tags:
- tuning
- pga
- caddyshack
- sheboygan
- memory
- oracle
modified_time: '2010-11-19T22:48:46.993-06:00'
blogger_id: tag:blogger.com,1999:blog-7032512792942232766.post-4125542344252939116
blogger_orig_url: http://www.seiler.us/2007/04/pga-not-just-for-caddyshack-2-fans.html
---

Ahh ... <a href="http://www.imdb.com/name/nm0556750/">Jackie Mason</a>.  The poor man's <a href="http://www.imdb.com/name/nm0001098/">Rodney Dangerfield</a>.  The pride of <a href="http://ci.sheboygan.wi.us/">Sheboygan, Wisconsin</a> (other than <a href="http://www.johnsonville.com/siteconf.nsf/Lkp/allabout-l3-freshgrillin.html">meat products</a>).<br /><br />But, no, today I'm not talking about golf (nor will I ever, if I can help it).  I'm talking about <a href="http://download-east.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i49320">Oracle's PGA</a>, the Program Global Area.  The PGA is a private chunk of memory dedicated to each server process (i.e. dedicated user processes).  It is used by the server processes when doing sorting or hash-joins, among others, and it is definitely something you want to pay attention to and <a href="http://www.databasejournal.com/features/oracle/article.php/10893_2109921_1">properly tune</a> for your database needs.<br /><br />After doing this reading, I calcuated that my PGA should probably be at least 256MB for sure, probably closer to 512MB.  Note that I hadn't touched or directly set it prior to this.  As soon as this output appeared on the screen, I doubled over in self-disgust.<br /><pre><br /><span style="color: rgb(0, 153, 0);">SQL> show parameter pga_aggregate_target</span><br /><br /><span style="color: rgb(0, 153, 0);">NAME                                 TYPE        VALUE</span><br /><span style="color: rgb(0, 153, 0);">------------------------------------ ----------- ------------------------------</span><br /><span style="color: rgb(0, 153, 0);">pga_aggregate_target                 big integer 24M</span><br /></pre><br /><br />I then went to see what the advisor table had to say.  Bear in mind that you want CACHE_HIT_PERCENTAGE as near to 100 as possible, and you definitely want ESTD_OVERALLOC_COUNT to be <span style="font-weight: bold;">0</span>.<br /><pre><br /><span style="color: rgb(0, 153, 0);">SQL> SELECT round(PGA_TARGET_FOR_ESTIMATE/1024/1024) target_mb,</span><br /><span style="color: rgb(0, 153, 0);">       ESTD_PGA_CACHE_HIT_PERCENTAGE cache_hit_perc,</span><br /><span style="color: rgb(0, 153, 0);">       ESTD_OVERALLOC_COUNT</span><br /><span style="color: rgb(0, 153, 0);">  FROM V$PGA_TARGET_ADVICE;</span><br /><br /><span style="color: rgb(0, 153, 0);"> TARGET_MB CACHE_HIT_PERC ESTD_OVERALLOC_COUNT</span><br /><span style="color: rgb(0, 153, 0);">---------- -------------- --------------------</span><br /><span style="color: rgb(0, 153, 0);">        12             52                30444</span><br /><span style="color: rgb(0, 153, 0);">        18             52                30444</span><br /><span style="color: rgb(0, 153, 0);">        24             75                30444</span><br /><span style="color: rgb(0, 153, 0);">        29             75                30444</span><br /><span style="color: rgb(0, 153, 0);">        34             75                30444</span><br /><span style="color: rgb(0, 153, 0);">        38             75                30444</span><br /><span style="color: rgb(0, 153, 0);">        43             75                30443</span><br /><span style="color: rgb(0, 153, 0);">        48             75                30423</span><br /><span style="color: rgb(0, 153, 0);">        72             75                30377</span><br /><span style="color: rgb(0, 153, 0);">        96             75                30309</span><br /><span style="color: rgb(0, 153, 0);">       144             75                29990</span><br /><span style="color: rgb(0, 153, 0);">       192             76                29335</span><br /></pre><br /><br />Yeah.  Neither goal is even on the charts.  So my plan now is to bump it up pga_aggregate_target to 512MB and see how those numbers settle out in a week.  I might even want to go higher in the end.  Google seems to imply that 24M is indeed the default pga_aggregate_target value, at least it was when I set this up as a new 9iR2 instance and imp'd the data over.<br /><br />To be continued ...