---
layout: post
title: v$sql_bind_capture Not Quite Capturing SQL Binds
date: '2008-01-29T16:09:00.000-06:00'
author: Don Seiler
tags: 
modified_time: '2010-11-20T12:12:49.929-06:00'
blogger_id: tag:blogger.com,1999:blog-7032512792942232766.post-9195319896749622742
blogger_orig_url: http://www.seiler.us/2009/01/vsqlbindcapture-not-quite-capturing-sql.html
---

A week or so ago, I was working with a developer to find out why a SQL statement he was sending would sometimes work and sometimes return an invalid DATE format error.  Part of the troubleshooting led us to examine the actual bind values being received by the server, just to make sure it was the same as being sent.  I thought I was onto something when I saw that the fields of TIMESTAMP datatype actually were NULL:<br /><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;">SQL&gt; select name, datatype_string, value_string</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;">from v$sql_bind_capture</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;">where sql_id='0wp5c2a3z82jr'</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;">SQL&gt; /</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;"><br /></span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;">NAME DATATYPE_STRING VALUE_STRING</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;">---- --------------- ------------</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;">:1 &nbsp; TIMESTAMP &nbsp; &nbsp; &nbsp; {NULL}</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;">:2 &nbsp; VARCHAR2(32) &nbsp; &nbsp;3WC</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;">:3 &nbsp; VARCHAR2(32) &nbsp; &nbsp;001</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;">:4 &nbsp; TIMESTAMP &nbsp; &nbsp; &nbsp; {NULL}</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;">:5 &nbsp; NUMBER &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;8429721</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;">:6 &nbsp; NUMBER &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;206</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;"><br /></span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;">6 rows selected.</span></span><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="font-size: x-small;"><br /></span></span><br />Unfortunately it was like this when the query both failed and succeeded.  I banged my head against the wall for 30 more minutes before concluding that it must be a bug.  Metalink agreed, and <a href="https://metalink.oracle.com/metalink/plsql/f?p=130:14:6987901499320050620::::p14_database_id,p14_docid,p14_show_header,p14_show_help,p14_black_frame,p14_font:NOT,444551.1,1,1,1,helvetica">Note 444551.1</a> details the bug, which is not yet fixed and "should be fixed in 11.2," affecting versions 9.2 to 11.1.   Seems kind of long for something like this to still be out in the open, and it's very annoying when you really want to see the value of a TIMESTAMP bind variable.